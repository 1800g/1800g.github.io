### 数据库结构优化的目的

- 减少数据冗余
- 尽量避免数据维护中出现更新,插入和删除异常  
	- 插入异常:如果表中的某个实体随着另一个实体而存在 
	- 更新异常:如果更改表中的某个实体的单独属性时,需要对多行进行更新
	- 如果删除表中的某一实体则会导致其他实体的消失
- 节约数据存储空间

### 数据库结构设计的步骤
- 需求分析:全面了解产品设计的存储需求
	- 存储需求
	- 数据处理需求
	- 数据安全性和完整性 
- 逻辑设计:设计数据的逻辑存储结构
	- 数据实体之间的逻辑关系,解决数据冗余和数据维护异常
- 物理设计:根据所使用的数据库特点进行表结构设计
- 维护优化:更具实际情况对索引、存储结构等进行优化

### 数据库设计范式
- 1NF
- 2NF
- 2CNF
- 3NF

### 案例
**需求说明**：
按下面的需求设计一个电子商务网站的数据库结构
1.本网站只销售图书类商品
2.需要具备以下功能
- 用户登陆
- 用户管理
- 商品展示
- 商品管理
- 供应商管理
- 在线销售

**用户登陆及用户管理功能**
- 用户必须注册并登陆系统才能进行网上交易
- 同一时间一个用户只能在一个地方登陆
- 用户信息:{**用户名**,密码,手机号,姓名,注册日期,在线状态,出生日期}
只有一个业务主键,一定是符合第二范式  
没有属性和业务主键存在传递依赖关系,符合第三范式

**商品展示及商品管理功能**
- 商品信息:{**商品名称**,分类名称,出版名称,图书价格,图书描述,作者}  
	拆分:  
	商品信息:{**商品名称**,出版社名称,图书价格,图书描述,作者}  
	分类信息:{**分类名称**,分类描述}  
	商品分类(对应关系表):{**商品名称**,**分类名称** }


**供应商管理功能**
- 供应商信息:{**出版社名称**,地址,电话,联系人,银行账号}

**在线销售功能**
- 在线销售:{**订单编号**,下单用户名,下单日期,订单金额,订单商品分类,订单商品名,订单商品数量,支付金额,物流单号}
  拆分:  
  订单表:{订单编号,下单用户名,下单日期,支付金额,物流单号}  
  订单商品关联表:{订单编号,订单商品分类,订单商品名,商品数量}  
  `完全符合范式化的设计有时并不能得到良好的SQL查询性能`



**什么叫做反范式化设计**？
> 反范式化是针对范式化而言的，所谓反范式化就是为了性能和读取效率的考虑而适当的对数据库设计范式的要求进行违反，而允许存在少量的数据冗余，换句话来说反范式化就是使用空间换取时间

图书在线销售网站数据库的反范式化改造
**商品展示及商品管理功能**
- 商品信息:{商品名称,分类名称,出版社名称,图书价格,图书描述,作者}
- 分类信息:{分类名称,分类描述}

**在线销售功能**
- 订单表:{订单编号,下单用户名,手机号,下单日期,支付金额,物流单号,订单金额}
- 订单商品关联表:{订单编号,订单商品分类,订单商品名,商品数量,商品单价}

### 范式化设计的优缺点
**优点**:
- 可以尽量的减少数据的冗余(数据表更新快体积小)
- 范式化的更新操作比反范式化更快
- 范式化的表通常比反范式化更小

**缺点**:
- 对于查询需要对多个表进行关联
- 更难进行索引优化

### 反范式化设计的优缺点
**优点**:
- 可以减少表的关联
- 可以更好的进行索引优化

**缺点**:
- 存在数据冗余及数据维护异常
- 对数据的修改需要更多的成本

### 物理设计
> 根据所选择的关系型数据库的特点对逻辑模型进行存储结构设计

**物理设计涉及的内容**
- 定义数据库、表及字段的命名规范  
	- 数据库、表及字段命名要遵守**可读性原则**
	- 数据库、表及字段命名要遵守**表意性原则**
	- 数据库、表及字段命名要遵守**长名原则**
- 选择合适的存储引擎  
![ySQL常用引擎对](/screenshots/MySQL常用引擎对比.png)
- 为表中的字段选择合适的数据类型
- 建立数据库结构
