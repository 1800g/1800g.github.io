**影响数据库性能的因素**
- sql查询速度
- 服务器硬件
- 网卡流量
- 磁盘IO

**衡量数据库性能的标准**:
> QPS:每秒钟处理的查询量  TPS:每秒钟执行事务的数量

当前MySQL数据库不支持多CPU并发运算  
每个sql只能用到一个CPU

> 10ms处理1个sql  
  1s处理100个sql  
  QPS<=100  
  100ms处理1个sql  
  QPS<=10

**风险**:
- 效率低下的SQL会导致较低的QPS、TPS
- 大量的并发:数据库连接数被占满(max_connections默认100)
- 超高的CPU使用率:因CPU资源耗尽而出现宕机
- 磁盘IO:磁盘IO性能突然下降
- 网卡流量:网卡IO被占满(1000Mb/8约等于100MB)

**如何避免无法连接数据库的情况**:
- 减少从服务器的数量
- 进行分级缓存
- 避免使用"select * "进行查询
- 分离业务网络和服务器网络

**大表给我们带来的问题**:
> 什么样的表可以称之为大表？(相对而言)
  - 记录行数巨大，单表超过千万行
  - 表数据文件巨大，表数据文件超过10G

**大表对查询的影响**:
- 慢查询:很难在一定的时间内过滤出所需要的数据

**大表对DDL操作的影响**:  
- 建立索引需要很长的时间(风险:MySQL版本<5.5建立索引会锁表;MySQL版本>=5.5不锁表，但会引起主从延迟)
- 修改表结构需要长时间锁表(风险:会造成长时间主从延迟;影响正常的数据操作)

**如何处理数据库中的大表**:
- 分库分表把一张大表分成多个小表  
  难点:  
    1. 分表主键的选择;
    2. 分表后跨分区数据的查询和统计
- 大表的历史数据归档(减少对前后端业务的影响)  
  难点:  
    1. 归档时间点的选择
    2. 如何进行归档的操作

**大事务给我们带来的影响**

**什么是大事务?**
> 运行时间比较长，操作的数据比较多的事务

**事务特性**:
- 原子性(Atomicity)
- 一致性(Consistency)
- 隔离性(Isolation)
  SQL标准中定义的四种隔离级别:(隔离性由低到高)(并发性由高到低)  
    - 未提交读(READ UNCOMMITED)
    - 已提交读(READ  COMMITED)
    - 可重复读(REPEATABLE READ)(InnoDB默认级别)
    - 可串行化(SERIALIZABLE)
- 持久性(Durability)

[数据库事务四大特性及隔离级别详解](https://www.cnblogs.com/fjdingsd/p/5273008.html)
 
 **风险:**
- 锁定太多的数据，造成大量的阻塞和锁超时
- 回滚时所需时间比较长
- 执行时间长，容易造成主从延迟

**如何处理大事务?**  
 - 避免一次处理太多的数据
 - 移出不必要在事务中的SELECT操作
  
### 从整体上来看我们能总结出以下影响性能的几个方面
  1. 服务器硬件
  2. 服务器系统
  3. 数据库存储引擎的选择
  4. 数据库参数配置
  5. 数据库结构设计和SQL语句
